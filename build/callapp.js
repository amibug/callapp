!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("callapp",[],t):"object"==typeof exports?exports.callapp=t():e.callapp=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<n.length||o<r.length;o+=1){var i=parseInt(n[o],10)||0,a=parseInt(r[o],10)||0;if(i<a)return-1;if(i>a)return 1}return 0}function i(e){f.default.log("in iframe func",e),P||(f.default.log("create iframe"),P=w.createElement("iframe"),P.id="callapp_iframe_"+Date.now(),P.frameborder="0",P.style.cssText="display:none;border:0;width:0;height:0;",w.body.appendChild(P)),P.src=e}function a(e){var t=w.createElement("a");t.setAttribute("href",e),t.style.display="none",w.body.appendChild(t);var n=w.createEvent("HTMLEvents");n.initEvent("click",!1,!1),t.dispatchEvent(n)}function u(e){return/^(http|https)\:\/\//.test(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=r(s),c=n(2),f=r(c),d={},p="";p=l.default.getHash("debug")&&l.default.getHash("ua")?l.default.getHash("ua"):window.navigator.userAgent;var h=!1,g=!1,b="",v=p.match(/Android[\s\/]([\d\.]+)/);v?(h=!0,b=v[1]):p.match(/(iPhone|iPad|iPod)/)&&(g=!0,v=p.match(/OS ([\d_\.]+) like Mac OS X/),v&&(b=v[1].split("_").join(".")));var m=!1,y=!1,x=!1;p.match(/(?:Chrome|CriOS)\/([\d\.]+)/)?(m=!0,p.match(/Version\/[\d+\.]+\s*Chrome/)&&(x=!0)):p.match(/iPhone|iPad|iPod/)&&(p.match(/Safari/)&&p.match(/Version\/([\d\.]+)/)?y=!0:p.match(/OS ([\d_\.]+) like Mac OS X/)&&(x=!0));var w=window.document,P=void 0;d.gotoPage=function(e,t,n){var r=e;f.default.log("targetUrl",e);var s=h&&m&&!x,l=h&&!!p.match(/samsung/i)&&o(b,"4.3")>=0&&o(b,"4.5")<0,c=g&&o(b,"9.0")>=0&&y;if(f.default.log("isOriginalChrome",s),f.default.log("fixUgly",l),f.default.log("ios9SafariFix",c),f.default.log("forceIntent",n),s||n){var d=r.substring(0,r.indexOf("://")),v="#Intent;scheme="+d+";package="+t+";end";r=r.replace(/.*?\:\/\//,"intent://"),r+=v,f.default.log("Intent",r)}if(c){if(u(r))return window.Tracker&&window.Tracker.click&&window.Tracker.click("not_schema"),void console.log("not schema");setTimeout(function(){a(r)},100)}else if(0===r.indexOf("intent:"))f.default.log("jump intent"),setTimeout(function(){window.location.href=r},100);else{var w=/^(http(s)?\:|javascript\:|vbscript\:|file\:|data\:|sms\:|smsto\:|tel\:|mailto\:|aliim\:|dingtalk\:|weixin\:)/;w.test(r.toLocaleLowerCase())?f.default.log("schema is url"):(f.default.log("call in iframe"),i(r))}},t.default=d,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={};r.getHash=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!==n?unescape(n[2]):null},r.isAllowDomains=function(e,t){var n="",r=0,o=[];if(!e)return!1;for(r;r<t.length;r++)t[r]="("+t[r].replace(".","\\.")+")";n="("+t.join("|")+")";var i=new RegExp("^((http://)|(https://)|(//))?([0-9a-zA-Z\\._:\\-]*[\\.@])?"+n+"(:[0-9]+)?(/.*)?$");return o=e.match(i),!(!o||!o[0])},r.insertParam=function(e,t){if("object"===("undefined"==typeof t?"undefined":n(t))){var r=Object.keys(t);return r.forEach(function(n,r){t[n]&&(e+=(e.split("?")[1]?"&":"?")+n+"="+t[n])}),e}if("string"==typeof t)return e+=(e.split("?")[1]?"&":"?")+t},r.getHashWithOutUnescape=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!==n?n[2]:null},r.dateFormat=function(e,t){e=e?parseInt(e):(new Date).getTime(),t=t||"yyyy-MM-dd hh:mm:ss";var n=new Date(e),r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return t},r.browser=function(){var e=navigator.userAgent;navigator.appVersion;return{mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1}}(),r.clone=function(e){return"object"!==("undefined"==typeof e?"undefined":n(e))?void console.log("非对象"):JSON.parse(JSON.stringify(e))},r.addHandler=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(3);var o=n(1),i=r(o),a=n(8),u=r(a),s={};s.log=function(){var e=window.Zepto;if(!e)return void console.log("Zepto is undefined");if(console.log(arguments),i.default.getHash("debug")){document.querySelector("#DebugPop")||e("body").append(u.default.pop());for(var t=function(e){var t="";return void 0!==e&&null!==e||(t=e),t="function"==typeof e||"number"==typeof e?e.toString():JSON.stringify(e),t+""},n="",r=0;r<arguments.length;r++)n+=t(arguments[r])+",";n=n.substr(0,n.length-1);try{e("#DebugPopboxContent").append(u.default.popItem(n))}catch(e){console.log("log error",JSON.stringify(e))}e("#DebugPopboxClear").on("click",function(){e("#DebugPopboxContent").html("")}),e("#DebugPopboxClose").on("click",function(){e("#DebugPop").remove()})}},window.debug=s,t.default=s,e.exports=t.default},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.id,r,""]]);var o,i={};i.transform=o;n(6)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.id,"#DebugPop{position:fixed;right:0;bottom:0;width:4.5rem;height:7rem}#DebugPop #DebugPopbox{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;border-radius:.1rem;background:rgba(0,0,0,.5);color:#fff}#DebugPop #DebugPopbox ul{width:100%;height:100%}#DebugPop #DebugPopbox ul li{line-height:.3rem;border-bottom:1px dotted hsla(0,0%,100%,.6);background:rgba(0,0,0,.5);color:hsla(0,0%,100%,.9);text-align:left;padding:.1rem .05rem;word-break:break-all}#DebugPop #DebugPopbox ul li:last-child{border-bottom:none}#DebugPop .debug-button{position:absolute;z-index:1000;right:0;height:.4rem;line-height:.4rem;width:.8rem;top:-.43rem;color:hsla(0,0%,100%,.8);border-radius:.1rem;background:transparent;border:1px solid rgba(0,0,0,.5);background:rgba(0,0,0,.4);cursor:pointer}#DebugPop .debug-button:active{color:hsla(0,0%,100%,.6);background:rgba(0,0,0,.6)}#DebugPop #DebugPopboxClear{right:.9rem}",""])},function(e,t){"use strict";function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=r(o),a=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}function r(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+n+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=h[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(c(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(c(r.parts[i],t));h[r.id]={id:r.id,refs:1,parts:a}}}}function o(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],u=i[1],s=i[2],l=i[3],c={css:u,media:s,sourceMap:l};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}function i(e,t){var n=v(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=x[x.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),x.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=x.indexOf(e);t>=0&&x.splice(t,1)}function u(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),i(e,t),t}function s(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),i(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,o,i;if(t.transform&&e.css){if(i=t.transform(e.css),!i)return function(){};e.css=i}if(t.singleton){var l=y++;n=m||(m=u(t)),r=f.bind(null,n,l,!1),o=f.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=p.bind(null,n,t),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(t),r=d.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=P(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=w(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}var h={},g=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},b=g(function(){return window&&document&&document.all&&!window.atob}),v=function(e){var t={};return function(n){return"undefined"==typeof t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),m=null,y=0,x=[],w=n(7);e.exports=function(e,t){t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},"undefined"==typeof t.singleton&&(t.singleton=b()),"undefined"==typeof t.insertInto&&(t.insertInto="head"),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e,t);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var u=n[a],s=h[u.id];s.refs--,i.push(s)}if(e){var l=o(e,t);r(l,t)}for(var a=0;a<i.length;a++){var s=i[a];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete h[s.id]}}}};var P=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/"),o=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"});return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={pop:function(){return'\n      <div id="DebugPop">\n        <div id="DebugPopbox">\n          <ul id="DebugPopboxContent">\n          </ul>\n        </div>\n        <button id="DebugPopboxClear" class="debug-button">清屏</button>\n        <button id="DebugPopboxClose" class="debug-button">关闭</button>\n      </div>\n    '},popItem:function(e){return"\n      <li>"+e+"</li>\n    "}};t.default=n,e.exports=t.default}])});